# ConvLstm_of_air_prediction
a graduate design for air prediction
   
## 前期数据预处理     
1. 先统计时间上缺失的数据
2. 采用插值方法填补数据
3. 做出对应图像后可以看出整个数据非常的粗糙，采用滤波器调整数据，并输出为对应csv数据文档
这是河南数据处理的过程图
原图
![本地路径](img/预处理原图.png)
插值填充后的
![本地路径](img/插值填充后的.png)
消除噪声后的
![本地路径](img/消除噪声后的.png)


## 这是网上一份London的气象数据
预测方法是采集5个地点的气象数据，采用240作为时间窗口，按照0.8, 0.1, 0.1划分训练，验证，测试集合  
最后以5个地点的输入数据作为input，预测某个地点后续时间的气象数据  
最后蓝线是实际值，红线是预测值
准确率如下, 0.8-1.2作为误差范围
[0.973744292237443, 0.9994292237442922, 0.9828767123287672, 0.9406392694063926, 0.9480593607305936]
![本地路径](img/1.png)   

## 河南数据测试结果
这是河南那份数据，处理方式一致
误差范围设定为0.8-1.2
准确率如下
[0.593607305936073, 0.6666666666666666, 0.6004566210045662, 0.5376712328767124, 0.8984018264840182, 0.684931506849315]
![本地路径](img/2.png)

采用相同网络结构出现当前误差原因分析：
1. 因为河南那份数据只取了19年一整年的时间作为数据使用，London采用了18-19-20总计2年的时间
2. 河南那份数据阉割了风向信息
3. 目前认为1为主要原因

## 采用model层说明

Model: "sequential"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
conv_lst_m2d (ConvLSTM2D)    (None, 10, 38, 64)        50176     
_________________________________________________________________
flatten (Flatten)            (None, 24320)             0         
_________________________________________________________________
repeat_vector (RepeatVector) (None, 1, 24320)          0         
_________________________________________________________________
lstm (LSTM)                  (None, 1, 200)            19616800  
_________________________________________________________________
dense (Dense)                (None, 1, 100)            20100     
_________________________________________________________________
dense_1 (Dense)              (None, 1, 40)             4040      

![本地路径](img/model.png)
